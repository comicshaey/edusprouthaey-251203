<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <title>수면일지 막대그래프 달력</title>

  <link rel="icon" href="/static/favicon.ico" />
  <!-- 공통 레이아웃 스타일 -->
  <link rel="stylesheet" href="/static/style.css" />
  <!-- 수면일지 전용 스타일 -->
  <link rel="stylesheet" href="/sleep-log/sleep-log.css" />

  <script src="/static/disable-copy.js"></script>
  <script src="/static/global-loader.js"></script>
  <!-- 수면일지 전용 JS -->
  <script src="/sleep-log/sleep-log.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="shell">
      <h1>수면일지 막대그래프 달력</h1>
      <p class="sub">
        · 한 칸 = 1시간, 기준일 정오(12시) ~ 다음날 정오(12시)까지 표시<br/>
        · 밤 수면 / 자다 깸 / 낮잠 / 약 복용 시간을 색으로 기록 (브라우저에 자동 저장)
      </p>
    </div>
  </header>

  <main>
    <div class="shell">
      <section class="section">
        <h2>기록 입력</h2>

        <div class="sleep-controls">
          <div>
            <div class="field-label">기준 날짜</div>
            <input type="date" id="date-input" />
          </div>

          <div>
            <div class="field-label">시작 시간</div>
            <input type="time" id="start-time" />
          </div>

          <div>
            <div class="field-label">끝 시간 (약 복용은 비워도 됨)</div>
            <input type="time" id="end-time" />
          </div>

          <div>
            <div class="field-label">기록 종류</div>
            <div class="sleep-type-group">
              <label><input type="radio" name="segment-type" value="night" checked /> 밤 수면</label>
              <label><input type="radio" name="segment-type" value="awake" /> 깨어있음</label>
              <label><input type="radio" name="segment-type" value="nap" /> 낮잠</label>
              <label><input type="radio" name="segment-type" value="med" /> 약 복용</label>
            </div>
          </div>

          <div>
            <button class="btn primary" id="add-btn" type="button">달력에 추가</button>
          </div>
        </div>

        <div class="sleep-legend">
          <span class="legend-chip">
            <span class="legend-color legend-night"></span> 밤 수면
          </span>
          <span class="legend-chip">
            <span class="legend-color legend-awake"></span> 깨어있음 / 중간에 깸
          </span>
          <span class="legend-chip">
            <span class="legend-color legend-nap"></span> 낮잠
          </span>
          <span class="legend-pill-wrap">
            <span class="legend-pill"></span> 약 복용 시간
          </span>
        </div>

        <p class="sleep-help">
          · 기준 날짜 한 줄이 <b>그날 정오 12시부터 다음날 정오 12시까지</b> 24시간을 의미함.<br/>
          · 예: 2025-11-26 / 23:00~06:00 → 26일 줄의 오른쪽(밤)~다음날 새벽 칸까지 파란색으로 표시.<br/>
          · 입력 후에는 자동으로 이 컴퓨터/브라우저에 저장됨.
        </p>

        <div class="sleep-data-controls">
          <button type="button" class="btn-ghost" id="clear-all-btn">
            전체 데이터 초기화
          </button>
          <button type="button" class="btn-ghost" id="dump-json-btn">
            데이터 JSON 보기 (복사해서 백업용)
          </button>
        </div>

        <textarea id="json-dump"
          style="margin-top:8px;width:100%;min-height:90px;display:none;font-size:0.75rem;"></textarea>
      </section>

      <section class="section">
        <h2>수면 달력</h2>
        <div class="table-wrap">
          <table class="sleep-table" id="sleep-table">
            <thead>
              <tr id="sleep-header-row">
                <th class="date-col">날짜</th>
              </tr>
            </thead>
            <tbody id="sleep-body">
              <!-- JS에서 날짜별 행 추가 -->
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </main>
</body>
</html>
